{"ast":null,"code":"var _jsxFileName = \"/home/rudransh/public_html/react-redux/client/src/pages/admin/category/CategoryCreate.js\";\nimport React, { useState, useEffect } from \"react\";\nimport AdminNav from \"../../../components/nav/AdminNav\";\nimport { toast } from \"react-toastify\";\nimport { useSelector } from \"react-redux\";\nimport { createCategory, getCategories, removeCategory } from \"../../../functions/category\";\nimport { Link } from \"react-router-dom\";\nimport { EditOutlined, DeleteOutlined } from \"@ant-design/icons\";\nimport CategoryForm from \"../../../components/forms/CategoryForm\";\nimport LocalSearch from \"../../../components/forms/LocalSearch\";\n\nconst CategoryCreate = () => {\n  const {\n    user\n  } = useSelector(state => ({ ...state\n  }));\n  const [name, setName] = useState(\"\");\n  const [loading, setLoading] = useState(false);\n  const [categories, setCategories] = useState([]); //error\n\n  const [nameError, setNameError] = useState('');\n  const [flag, setFlag] = useState(false); // step 1\n\n  const [keyword, setKeyword] = useState(\"\");\n  useEffect(() => {\n    loadCategories();\n  }, []);\n\n  const loadCategories = () => getCategories().then(c => setCategories(c.data));\n\n  const validateForm = () => {\n    let errors = {};\n    let formIsValid = true;\n\n    if (!name) {\n      formIsValid = false;\n      setFlag(true);\n      setNameError('Please enter name');\n      errors['name'] = '*Please enter your username'; //console.log(errors['name']);\n    } else {\n      setFlag(false);\n    }\n\n    console.log(errors);\n    return formIsValid;\n  };\n\n  const handleSubmit = e => {\n    e.preventDefault();\n\n    if (validateForm()) {\n      setLoading(true);\n      createCategory({\n        name\n      }, user.token).then(res => {\n        // console.log(res)\n        setLoading(false);\n        setName(\"\");\n        toast.success(`\"${res.data.name}\" is created`);\n        loadCategories();\n      }).catch(err => {\n        console.log(err);\n        setLoading(false);\n        if (err.response.status === 400) toast.error(err.response.data);\n      });\n    }\n  };\n\n  const handleRemove = async slug => {\n    // let answer = window.confirm(\"Delete?\");\n    // console.log(answer, slug);\n    if (window.confirm(\"Delete?\")) {\n      setLoading(true);\n      removeCategory(slug, user.token).then(res => {\n        setLoading(false);\n        toast.error(`${res.data.name} deleted`);\n        loadCategories();\n      }).catch(err => {\n        if (err.response.status === 400) {\n          setLoading(false);\n          toast.error(err.response.data);\n        }\n      });\n    }\n  }; // step 4\n\n\n  const searched = keyword => c => c.name.toLowerCase().includes(keyword);\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"container-fluid\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-md-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(AdminNav, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 9\n    }\n  }, loading ? /*#__PURE__*/React.createElement(\"h4\", {\n    className: \"text-danger\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 13\n    }\n  }, \"Loading..\") : /*#__PURE__*/React.createElement(\"h4\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 13\n    }\n  }, \"Create category\"), /*#__PURE__*/React.createElement(CategoryForm, {\n    handleSubmit: handleSubmit,\n    name: name,\n    setName: setName,\n    nameError: nameError,\n    setNameError: setNameError,\n    flag: flag,\n    setFlag: setFlag,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(LocalSearch, {\n    keyword: keyword,\n    setKeyword: setKeyword,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 11\n    }\n  }), categories.filter(searched(keyword)).map(c => /*#__PURE__*/React.createElement(\"div\", {\n    className: \"alert alert-secondary\",\n    key: c._id,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 13\n    }\n  }, c.name, /*#__PURE__*/React.createElement(\"span\", {\n    onClick: () => handleRemove(c.slug),\n    className: \"btn btn-sm float-right\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(DeleteOutlined, {\n    className: \"text-danger\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 17\n    }\n  })), /*#__PURE__*/React.createElement(Link, {\n    to: `/admin/category/${c.slug}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"btn btn-sm float-right\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(EditOutlined, {\n    className: \"text-warning\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 19\n    }\n  }))))))));\n};\n\nexport default CategoryCreate;","map":{"version":3,"sources":["/home/rudransh/public_html/react-redux/client/src/pages/admin/category/CategoryCreate.js"],"names":["React","useState","useEffect","AdminNav","toast","useSelector","createCategory","getCategories","removeCategory","Link","EditOutlined","DeleteOutlined","CategoryForm","LocalSearch","CategoryCreate","user","state","name","setName","loading","setLoading","categories","setCategories","nameError","setNameError","flag","setFlag","keyword","setKeyword","loadCategories","then","c","data","validateForm","errors","formIsValid","console","log","handleSubmit","e","preventDefault","token","res","success","catch","err","response","status","error","handleRemove","slug","window","confirm","searched","toLowerCase","includes","filter","map","_id"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport AdminNav from \"../../../components/nav/AdminNav\";\nimport { toast } from \"react-toastify\";\nimport { useSelector } from \"react-redux\";\nimport {\n  createCategory,\n  getCategories,\n  removeCategory,\n} from \"../../../functions/category\";\nimport { Link } from \"react-router-dom\";\nimport { EditOutlined, DeleteOutlined } from \"@ant-design/icons\";\nimport CategoryForm from \"../../../components/forms/CategoryForm\";\nimport LocalSearch from \"../../../components/forms/LocalSearch\";\n\nconst CategoryCreate = () => {\n  const { user } = useSelector((state) => ({ ...state }));\n\n  const [name, setName] = useState(\"\");\n  const [loading, setLoading] = useState(false);\n  const [categories, setCategories] = useState([]);\n   \n  //error\n  const [nameError, setNameError] = useState('');\n  const  [flag, setFlag] = useState(false);\n\n  // step 1\n  const [keyword, setKeyword] = useState(\"\");\n\n  useEffect(() => {\n    loadCategories();\n  }, []);\n\n  const loadCategories = () =>\n    getCategories().then((c) => setCategories(c.data));\n\n    const validateForm = () => {\n      let errors = {}\n      let formIsValid = true\n      if (!name) {\n            formIsValid = false\n            setFlag(true);\n            setNameError('Please enter name');\n            errors['name'] = '*Please enter your username';\n            //console.log(errors['name']);\n      }\n      else{\n        setFlag(false);\n      }\n\n     console.log(errors);\n\n      return formIsValid;\n\n  }\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n   \n  if (validateForm()) {\n    setLoading(true);\n    createCategory({ name }, user.token)\n      .then((res) => {\n        // console.log(res)\n        setLoading(false);\n        setName(\"\");\n        toast.success(`\"${res.data.name}\" is created`);\n        loadCategories();\n      })\n      .catch((err) => {\n        console.log(err);\n        setLoading(false);\n        if (err.response.status === 400) toast.error(err.response.data);\n      });\n    }\n\n\n  };\n  const handleRemove = async (slug) => {\n    // let answer = window.confirm(\"Delete?\");\n    // console.log(answer, slug);\n    if (window.confirm(\"Delete?\")) {\n      setLoading(true);\n      removeCategory(slug, user.token)\n        .then((res) => {\n          setLoading(false);\n          toast.error(`${res.data.name} deleted`);\n          loadCategories();\n        })\n        .catch((err) => {\n          if (err.response.status === 400) {\n            setLoading(false);\n            toast.error(err.response.data);\n          }\n        });\n    }\n  };\n\n  // step 4\n  const searched = (keyword) => (c) => c.name.toLowerCase().includes(keyword);\n\n  return (\n    <div className=\"container-fluid\">\n      <div className=\"row\">\n        <div className=\"col-md-2\">\n          <AdminNav />\n        </div>\n        <div className=\"col\">\n          {loading ? (\n            <h4 className=\"text-danger\">Loading..</h4>\n          ) : (\n            <h4>Create category</h4>\n          )}\n\n          <CategoryForm\n            handleSubmit={handleSubmit}\n            name={name}\n            setName={setName}\n            nameError = { nameError }\n            setNameError = { setNameError }\n            flag = { flag }\n            setFlag = { setFlag }\n          />\n\n          {/* step 2 and step 3 */}\n          <LocalSearch keyword={keyword} setKeyword={setKeyword} />\n\n          {/* step 5 */}\n          {categories.filter(searched(keyword)).map((c) => (\n            <div className=\"alert alert-secondary\" key={c._id}>\n              {c.name}\n              <span\n                onClick={() => handleRemove(c.slug)}\n                className=\"btn btn-sm float-right\"\n              >\n                <DeleteOutlined className=\"text-danger\" />\n              </span>\n              <Link to={`/admin/category/${c.slug}`}>\n                <span className=\"btn btn-sm float-right\">\n                  <EditOutlined className=\"text-warning\" />\n                </span>\n              </Link>\n            </div>\n          ))}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default CategoryCreate;\n"]},"metadata":{},"sourceType":"module"}