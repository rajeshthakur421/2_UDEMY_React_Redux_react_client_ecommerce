{"ast":null,"code":"var _jsxFileName = \"/home/rudransh/public_html/react-redux/client/src/pages/admin/category/CategoryCreate.js\";\nimport React, { useState, useEffect } from \"react\";\nimport AdminNav from \"../../../components/nav/AdminNav\";\nimport { toast } from \"react-toastify\";\nimport { useSelector } from \"react-redux\";\nimport { createCategory, getCategories, removeCategory } from \"../../../functions/category\";\nimport { Link } from \"react-router-dom\";\nimport { EditOutlined, DeleteOutlined } from \"@ant-design/icons\";\nimport CategoryForm from \"../../../components/forms/CategoryForm\";\nimport LocalSearch from \"../../../components/forms/LocalSearch\";\n\nconst CategoryCreate = () => {\n  const {\n    user\n  } = useSelector(state => ({ ...state\n  }));\n  const [name, setName] = useState(\"\");\n  const [loading, setLoading] = useState(false);\n  const [categories, setCategories] = useState([]); // step 1\n\n  const [keyword, setKeyword] = useState(\"\");\n  useEffect(() => {\n    loadCategories();\n  }, []);\n\n  const loadCategories = () => getCategories().then(c => setCategories(c.data));\n\n  const handleSubmit = e => {\n    e.preventDefault(); // console.log(name);\n\n    setLoading(true);\n    createCategory({\n      name\n    }, user.token).then(res => {\n      // console.log(res)\n      setLoading(false);\n      setName(\"\");\n      toast.success(`\"${res.data.name}\" is created`);\n      loadCategories();\n    }).catch(err => {\n      console.log(err);\n      setLoading(false);\n      if (err.response.status === 400) toast.error(err.response.data);\n    });\n  };\n\n  const handleRemove = async slug => {\n    // let answer = window.confirm(\"Delete?\");\n    // console.log(answer, slug);\n    if (window.confirm(\"Delete?\")) {\n      setLoading(true);\n      removeCategory(slug, user.token).then(res => {\n        setLoading(false);\n        toast.error(`${res.data.name} deleted`);\n        loadCategories();\n      }).catch(err => {\n        if (err.response.status === 400) {\n          setLoading(false);\n          toast.error(err.response.data);\n        }\n      });\n    }\n  }; // step 4\n\n\n  const searched = keyword => c => c.name.toLowerCase().includes(keyword);\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"container-fluid\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-md-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(AdminNav, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 9\n    }\n  }, loading ? /*#__PURE__*/React.createElement(\"h4\", {\n    className: \"text-danger\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 13\n    }\n  }, \"Loading..\") : /*#__PURE__*/React.createElement(\"h4\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 13\n    }\n  }, \"Create category\"), /*#__PURE__*/React.createElement(CategoryForm, {\n    handleSubmit: handleSubmit,\n    name: name,\n    setName: setName,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(LocalSearch, {\n    keyword: keyword,\n    setKeyword: setKeyword,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 11\n    }\n  }), categories.filter(searched(keyword)).map(c => /*#__PURE__*/React.createElement(\"div\", {\n    className: \"alert alert-secondary\",\n    key: c._id,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 13\n    }\n  }, c.name, /*#__PURE__*/React.createElement(\"span\", {\n    onClick: () => handleRemove(c.slug),\n    className: \"btn btn-sm float-right\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(DeleteOutlined, {\n    className: \"text-danger\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 17\n    }\n  })), /*#__PURE__*/React.createElement(Link, {\n    to: `/admin/category/${c.slug}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"btn btn-sm float-right\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(EditOutlined, {\n    className: \"text-warning\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 19\n    }\n  }))))))));\n};\n\nexport default CategoryCreate;","map":{"version":3,"sources":["/home/rudransh/public_html/react-redux/client/src/pages/admin/category/CategoryCreate.js"],"names":["React","useState","useEffect","AdminNav","toast","useSelector","createCategory","getCategories","removeCategory","Link","EditOutlined","DeleteOutlined","CategoryForm","LocalSearch","CategoryCreate","user","state","name","setName","loading","setLoading","categories","setCategories","keyword","setKeyword","loadCategories","then","c","data","handleSubmit","e","preventDefault","token","res","success","catch","err","console","log","response","status","error","handleRemove","slug","window","confirm","searched","toLowerCase","includes","filter","map","_id"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport AdminNav from \"../../../components/nav/AdminNav\";\nimport { toast } from \"react-toastify\";\nimport { useSelector } from \"react-redux\";\nimport {\n  createCategory,\n  getCategories,\n  removeCategory,\n} from \"../../../functions/category\";\nimport { Link } from \"react-router-dom\";\nimport { EditOutlined, DeleteOutlined } from \"@ant-design/icons\";\nimport CategoryForm from \"../../../components/forms/CategoryForm\";\nimport LocalSearch from \"../../../components/forms/LocalSearch\";\n\nconst CategoryCreate = () => {\n  const { user } = useSelector((state) => ({ ...state }));\n\n  const [name, setName] = useState(\"\");\n  const [loading, setLoading] = useState(false);\n  const [categories, setCategories] = useState([]);\n  // step 1\n  const [keyword, setKeyword] = useState(\"\");\n\n  useEffect(() => {\n    loadCategories();\n  }, []);\n\n  const loadCategories = () =>\n    getCategories().then((c) => setCategories(c.data));\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    // console.log(name);\n    setLoading(true);\n    createCategory({ name }, user.token)\n      .then((res) => {\n        // console.log(res)\n        setLoading(false);\n        setName(\"\");\n        toast.success(`\"${res.data.name}\" is created`);\n        loadCategories();\n      })\n      .catch((err) => {\n        console.log(err);\n        setLoading(false);\n        if (err.response.status === 400) toast.error(err.response.data);\n      });\n  };\n\n  const handleRemove = async (slug) => {\n    // let answer = window.confirm(\"Delete?\");\n    // console.log(answer, slug);\n    if (window.confirm(\"Delete?\")) {\n      setLoading(true);\n      removeCategory(slug, user.token)\n        .then((res) => {\n          setLoading(false);\n          toast.error(`${res.data.name} deleted`);\n          loadCategories();\n        })\n        .catch((err) => {\n          if (err.response.status === 400) {\n            setLoading(false);\n            toast.error(err.response.data);\n          }\n        });\n    }\n  };\n\n  // step 4\n  const searched = (keyword) => (c) => c.name.toLowerCase().includes(keyword);\n\n  return (\n    <div className=\"container-fluid\">\n      <div className=\"row\">\n        <div className=\"col-md-2\">\n          <AdminNav />\n        </div>\n        <div className=\"col\">\n          {loading ? (\n            <h4 className=\"text-danger\">Loading..</h4>\n          ) : (\n            <h4>Create category</h4>\n          )}\n\n          <CategoryForm\n            handleSubmit={handleSubmit}\n            name={name}\n            setName={setName}\n          />\n\n          {/* step 2 and step 3 */}\n          <LocalSearch keyword={keyword} setKeyword={setKeyword} />\n\n          {/* step 5 */}\n          {categories.filter(searched(keyword)).map((c) => (\n            <div className=\"alert alert-secondary\" key={c._id}>\n              {c.name}\n              <span\n                onClick={() => handleRemove(c.slug)}\n                className=\"btn btn-sm float-right\"\n              >\n                <DeleteOutlined className=\"text-danger\" />\n              </span>\n              <Link to={`/admin/category/${c.slug}`}>\n                <span className=\"btn btn-sm float-right\">\n                  <EditOutlined className=\"text-warning\" />\n                </span>\n              </Link>\n            </div>\n          ))}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default CategoryCreate;\n"]},"metadata":{},"sourceType":"module"}